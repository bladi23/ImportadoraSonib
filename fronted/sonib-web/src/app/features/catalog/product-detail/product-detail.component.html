<div *ngIf="loading">Cargando…</div>
<p class="err" *ngIf="!loading && error">{{error}}</p>

<section *ngIf="!loading && p">
  <a routerLink="/catalog">← Volver</a>

  <div class="detail">
    <img [src]="p.imageUrl || 'https://via.placeholder.com/600x400?text=Producto'" [alt]="p.name" />
    <div class="info">
      <h1>{{ p.name }}</h1>
      <div class="cat">{{ p.category }}</div>
      <div class="price">$ {{ p.price | number:'1.2-2' }}</div>

      <p class="desc" [innerText]="p.description || 'Sin descripción.'"></p>

      <div class="buy">
        <label>Cantidad</label>
        <input type="number" [(ngModel)]="qty" min="1" [max]="p.stock" />
        <button (click)="addToCart()">Añadir al carrito</button>
      </div>
    </div>
  </div>
<section class="recos" *ngIf="recos.length">
  <h3>También te puede interesar</h3>
  <div class="grid">
    <a *ngFor="let r of recos" [routerLink]="['/product', r.slug]" class="rcard" aria-label="Ver {{ r.name }}">
      <img [src]="r.imageUrl || 'https://via.placeholder.com/300x200?text=Producto'"
           [alt]="r.name">
      <div class="title">{{ r.name }}</div>
      <div class="price">$ {{ r.price | number:'1.2-2' }}</div>
    </a>
  </div>
</section>


</section>
